<%- include('../partials/head') -%>

<%- include('../partials/nav') -%>

    <div class="main-content">

        <div class="page-content">
            <div class="container-fluid">

                <!-- start page title -->
                <div class="row">
                    <div class="col-12">
                        <div class="page-title-box d-flex align-items-center justify-content-between">
                            <h4 class="mb-0 font-size-18">Starter Page</h4>

                            <div class="page-title-right">
                                <ol class="breadcrumb m-0">
                                    <li class="breadcrumb-item"><a href="javascript: void(0);">Tasks</a></li>
                                    <li class="breadcrumb-item active">Create Task</li>
                                </ol>
                            </div>

                           

                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-12">
                        <div class="card">
                            <div class="card-body">
                                <h4 class="card-title mb-4">Edit Task</h4>
                                <form class="outer-repeater" action="/tasks/update/<%=task._id %>" method="POST">
                                    <div data-repeater-list="outer-group" class="outer">
                                        <div data-repeater-item class="outer">
                                            <div class="form-group row mb-4">
                                                <label for="taskname" class="col-form-label col-lg-2">Task Name</label>
                                                <div class="col-lg-10">
                                                    <input id="taskname" name="taskName" type="text" class="form-control" value="<%= task.taskName %>" placeholder="Enter Task Name...">
                                                </div>
                                            </div>
                                            <div class="form-group row mb-4">
                                                <label for="taskname" class="col-form-label col-lg-2">Description</label>
                                                <div class="col-lg-10">
                                                    <input id="taskname" name="taskDescription" type="text" class="form-control" value="<%= task.taskDescription %>" placeholder="Enter Task Name...">
                                                </div>
                                            </div>

                                            <div class="form-group row mb-4">
                                                <label class="col-form-label col-lg-2">Task Date</label>
                                                <div class="col-lg-5">
                                                        <input class="form-control" name="startDate" type="datetime-local" value="2020-11-19T13:45:00" id="example-datetime-local-input">
                                                </div>
                                                <div class="col-lg-5">
                                                    <input class="form-control" name="endDate" type="datetime-local" value="2020-11-19T13:45:00" id="example-datetime-local-input">
                                                </div>
                                            </div>
                                            
                                            <div class="inner-repeater mb-4">
                                                <div data-repeater-list="inner-group" class="inner form-group mb-0 row">
                                                    <label class="col-form-label col-lg-2">Add Team Member</label>
                                                    <div  data-repeater-item class="inner col-lg-10 ml-md-auto">
                                                        <div class="mb-3 row align-items-center">
                                                            <div class="col-md-6">
                                                                
                                                                <select class="form-control" name="teamMember" required>
                                                                    <option value="">Pleas select Driver Phone</option>
                                                                    <% if(driver.length > 0 ){ %>
                                                                    <% driver.forEach(driver => { %>
                                                                        <option value="<%= driver.PhoneNumber %>"><%= driver.PhoneNumber %></option>
                                                                     <% }) %>
                                                                     <% } %> 
                                                                </select>
                                                               
                                                            </div>
                                                            <!-- <div class="col-md-4">
                                                                <div class="mt-4 mt-md-0">
                                                                    <input type="file" class="form-control-file">
                                                                </div>
                                                            </div> -->
                                                            <!-- <div class="col-md-2">
                                                                <div class="mt-2 mt-md-0">
                                                                    <input data-repeater-delete type="button" class="btn btn-primary btn-block inner" value="Delete"/>
                                                                </div>
                                                            </div> -->
                                                            
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- <div class="row justify-content-end">
                                                    <div class="col-lg-10">
                                                        <input data-repeater-create type="button" class="btn btn-success inner" value="Add Number"/>
                                                    </div>
                                                </div> -->
                                            </div>
                                            <!-- <div class="form-group row mb-4">
                                                <label for="taskbudget" class="col-form-label col-lg-2">Budget</label>
                                                <div class="col-lg-10">
                                                    <input id="taskbudget" name="taskbudget" type="text" placeholder="Enter Task Budget..." class="form-control">
                                                </div>
                                            </div> -->
                                        </div>
                                    </div>
                                    <div class="row justify-content-end">
                                        <div class="col-lg-10">
                                            <button type="submit" class="btn btn-primary">Update Task</button>
                                        </div>
                                    </div>
                                </form>
                                

                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- end page title -->
               
          
            <!-- end row -->

            
        </div>
        <!-- End Page-content -->

        
        <!-- <footer class="footer">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-6">
                        <script>document.write(new Date().getFullYear())</script> Â© Skote.
                    </div>
                    <div class="col-sm-6">
                        <div class="text-sm-right d-none d-sm-block">
                            Design & Develop by Themesbrand
                        </div>
                    </div>
                </div>
            </div>
        </footer> -->
    </div>

    <script>
         document.addEventListener('DOMContentLoaded', function () {
            FilePond.registerPlugin(
                FilePondPluginImagePreview,
                FilePondPluginImageResize,
                FilePondPluginFileEncode,
     


            );
            // https://pqina.nl/filepond/docs/patterns/api/filepond-object/#setting-options
            FilePond.setOptions({
                stylePanelAspectRatio: 30 / 50,
                imageResizeTargetWidth: 100,
                imageResizeTargetHeight: 50,
            })
            FilePond.parse(document.body);
        });
        // const form = document.querySelector('.storeRegister');
        // form.addEventListener('submit', async (e) => {
        //     e.preventDefault();
        //     const storeName = form.storeName.value;
        //     const storeMname = form.storeManagerName.value;
        //     const storeMphone = form.storeManagerPhone.value;
        //     const storeLocation1 = form.storeLocation1.value;
        //     const storeLocation2 = form.storeLocation2.value;
            
        //     const storeType = form.storeType.value;
            
        //     try {
        //         const res = await fetch('/store', {
        //             method: 'POST',
        //             body: JSON.stringify({storeName, storeMname, storeMphone, storeType, storeLocation1,storeLocation2}),
        //             headers: {'Content-Type': 'application/json'}
        //         })
                
        //         const data = await res.json();
        //         if(data.store){
        //             location.assign('/store')
        //         }
        //     } catch (err) {
        //         console.log(err)
        //     }
        // });

       
    </script>
    <!-- <script src="/map.js"></script> -->
    <script src="/add.js"></script>
    <%- include('../partials/footer') -%>